package Validator;

import java.util.ArrayList;
import java.util.List;

import Exception.StringException;
import Exception.IntException;
import Exception.DateException;
import Exception.TimeException;
import Exception.DiscountException;
import Exception.BooleanException;

public abstract class BaseValidator<T> {
    // Liste, um Fehler zu speichern
    protected List<String> errors = new ArrayList<>();

    // Validierungsmethode, kann beliebige Exceptions werfen
    public abstract void validate(T obj) throws Exception, StringException, IntException, DateException, TimeException, DiscountException, BooleanException;

    // Ist die Eingabe gültig?
    public boolean isValid() {
        return errors.isEmpty();
    }

    // Fehler ausgeben
    public List<String> getErrors() {
        return errors;
    }

    // Entfernte Methode checkNotNull
    // Falls benötigt, kann sie wie folgt aussehen:
    // protected void checkNotNull(Object value, String fieldName) throws DataIsNullException {
    //     if (value == null) {
    //         String msg = fieldName + " darf nicht null sein.";
    //         errors.add(msg);
    //         throw new DataIsNullException(msg);
    //     }
    // }

    // Wenn ein String leer oder null ist, Fehlermeldung und Exception
    protected void checkNotEmptyString(String value, String fieldName) throws Exception {
        if (value == null || value.trim().isEmpty()) {
            String msg = fieldName + " darf nicht leer sein.";
            errors.add(msg);
            throw new Exception(msg);
        }
    }

    // Wenn die Länge nicht passt, Fehlermeldung und Exception
    public void checkLength(String value, String fieldName, int min, int max) throws Exception {
        if (value != null) {
            int length = value.length();
            if (length < min) {
                String msg = fieldName + " ist zu kurz. Minimum: " + min;
                errors.add(msg);
                throw new Exception(msg);
            }
            if (length > max) {
                String msg = fieldName + " ist zu lang. Maximum: " + max;
                errors.add(msg);
                throw new Exception(msg);
            }
        }
    }
}
